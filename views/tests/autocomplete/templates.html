
<div class="row">
  <div class="twelve columns">
    <h2 class="fieldset-title">Autocomplete - for search and textbox</h2>

    <div class="field">
      <label for="auto-default">#auto-default (autocomplete with stock settings)</label>
      <input data-autocomplete="/api/states?term=" id="auto-default" class="autocomplete" placeholder="Type to Search" type="text" />
    </div>

    <div class="field">
      <label for="auto-template">#auto-template (uses an alternate source and external template)</label>
      <input data-autocomplete="source" data-init="false" dataclass="autocomplete" data-tmpl="#autocomplete-template-email" id="auto-template" placeholder="Type to Search" type="text">
    </div>

  </div>
</div>

<!--This is only needed because it renders first on the server-->
{{={{{ }}}=}}
<script id="autocomplete-template-email" type="text/html">
  <li id="{{listItemId}}" {{#hasValue}} data-value="{{value}}" {{/hasValue}} role="listitem">
    <a href="#" tabindex="-1">
       <span>{{& label}}</span>
       <small>{{& email}}</small>

       <span style="display: none;" class="display-value">{{& label}} - {{& email}}</span>
    </a>
  </li>
</script>

<script type="text/javascript">
  $('body').on('initialized', function() {
    $('#auto-default, #auto-template').on('selected.test', function(e, anchor, item) {
      var anchorText = $(anchor).text().trim(),
        displayValue = $(anchor).find('.display-value'),
        indicatorText;

      if (displayValue && displayValue.length) {
        anchorText = displayValue.text().trim();
        indicatorText = '(was a display value)';
      }

      $('body').toast({
        title: 'Selected',
        message: 'Selected the <b>"' + anchorText + '"</b> item with value <b>' + item.value + '</b>!' + (indicatorText ? '<br/><em>' + indicatorText + '</em>' : '')
      });
    });
  });
</script>
