<div class="row">
  <div class="six columns">

    <button type="button" id="button-1" class="btn-secondary">
      Contextual Action Panel 1
    </button>

    <button type="button" id="button-2" class="btn-secondary">
      Contextual Action Panel 2
    </button>

  </div>
</div>

<div id="panel-1" style="display: none;">
  <div class="toolbar">
    <div class="title">Company Information</div>
    <div class="buttonset">
      <button class="btn" type="button">
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-save"></use>
        </svg>
        <span>Save</span>
      </button>
      <div class="separator"></div>
      <button name="close" class="btn" type="button">
        <svg class="icon icon-close" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-close"></use>
        </svg>
        <span>Close</span>
      </button>
    </div>
  </div>
  <div class="row">
    <div class="six columns">

      <div class="field">
        <label for="company-name">Company Name</label>
        <select id="company-name" name="company-name" class="dropdown">
          <option value="">None</option>
          <option value="jawbone" selected>Jawbone, Inc.</option>
          <option value="infor">Infor</option>
        </select>
      </div>

      <div class="field">
        <label for="purchase-form">Purchase Form</label>
        <select id="purchase-form" name="purchase-form" class="dropdown">
          <option value="">None</option>
          <option value="3567" selected>3567</option>
          <option value="3568">3568</option>
          <option value="3569">3569</option>
        </select>
      </div>

      <div class="field">
        <label for="template">Template</label>
        <select id="template" name="template" class="dropdown">
          <option value="" selected>None</option>
          <option value="1">Template #1</option>
          <option value="2">Template #2</option>
        </select>
      </div>

      <div class="field">
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes"></textarea>
      </div>

    </div>
    <div class="six columns">

      <div class="field">
        <label for="ship-terms">Ship Terms</label>
        <select id="ship-terms" name="ship-terms" class="dropdown">
          <option value="">None</option>
          <option value="default" selected>Default</option>
          <option value="alternate">Alternate</option>
        </select>
      </div>

      <div class="field">
        <label for="ship-via">Ship Via</label>
        <select id="ship-via" name="ship-via" class="dropdown">
          <option value="">None</option>
          <option value="freight" selected>Freight</option>
          <option value="air">USPS Air</option>
        </select>
      </div>

      <div class="field">
        <label for="issue-method">Issue Method</label>
        <select id="issue-method" name="issue-method" class="dropdown">
          <option value="">None</option>
          <option value="phone">Telephone</option>
          <option value="email" selected>E-mail</option>
          <option value="sms">SMS Message</option>
        </select>
      </div>

      <div class="field">
        <button class="btn-secondary" type="button" id="trigger-1">Show Nested Modal</button>
      </div>
      <div class="field">
        <button class="btn-secondary" type="button" id="trigger-2">Show Nested CAP</button>
      </div>

    </div>
  </div>
</div>

<div id="panel-2" style="display: none;">
  <div class="toolbar">
    <div class="title">Supplier Information</div>
    <div class="buttonset">
      <button class="btn" type="button">
        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-save"></use>
        </svg>
        <span>Save and Return</span>
      </button>
      <div class="separator"></div>
      <button name="close" class="btn" type="button">
        <svg class="icon icon-close" focusable="false" aria-hidden="true" role="presentation">
          <use href="#icon-close"></use>
        </svg>
        <span>Close and Return</span>
      </button>
    </div>
  </div>
  <div class="row">
    <div class="six columns">

      <div class="field">
        <label for="supplier-name">Supplier Name</label>
        <select id="supplier-name" name="supplier-name" class="dropdown">
          <option value="">None</option>
          <option value="jawbone" selected>Jawbone, Inc.</option>
          <option value="infor">Infor</option>
        </select>
      </div>

      <div class="field">
        <label for="packaging-form">Packaging</label>
        <select id="packaging-form" name="packaging-form" class="dropdown">
          <option value="">None</option>
          <option value="3567" selected>3567</option>
          <option value="3568">3568</option>
          <option value="3569">3569</option>
        </select>
      </div>
    </div>
    <div class="six columns">

      <div class="field">
        <label for="details-terms">Details Terms</label>
        <select id="details-terms" name="details-terms" class="dropdown">
          <option value="">None</option>
          <option value="default" selected>Default</option>
          <option value="alternate">Alternate</option>
        </select>
      </div>

      <div class="field">
        <label for="billing-via">Billing Via</label>
        <select id="billing-via" name="billing-via" class="dropdown">
          <option value="">None</option>
          <option value="freight" selected>Freight</option>
          <option value="air">USPS Air</option>
        </select>
      </div>

      <div class="field">
        <label for="control-method">Control Method</label>
        <select id="control-method" name="control-method" class="dropdown">
          <option value="">None</option>
          <option value="phone">Telephone</option>
          <option value="email" selected>E-mail</option>
          <option value="sms">SMS Message</option>
        </select>
      </div>
    </div>
  </div>
</div>

<div class="modal no-init" id="modal-2">
  <div class="modal-content">
    <div class="modal-header">
      <h1 class="modal-title">Top Moda</h1>
    </div>

    <div class="modal-body">
      <p>This is a nested modal</p>
      <div class="modal-buttonset">
        <button type="button" class="btn-default btn-close">Close</button>
      </div>
    </div>
  </div>
</div>

<script>

  $('#button-1').on('click', function () {
    $('body').contextualactionpanel({
      title: 'Expenses: $50,000.00',
      content: $('#panel-1'),
      trigger: 'immediate',
      buttons: [
        {
          type: 'input',
          text: 'Keyword',
          id: 'filter',
          name: 'filter',
          cssClass: 'searchfield',
          searchfieldSettings: {
            clearable: true,
            collapsible: true
          }
        },
        {
          cssClass: 'separator'
        },
        {
          text: 'Close',
          cssClass: 'btn',
          icon: '#icon-close',
          click: function() {
            var api = $(this).data('modal');
            api.close();
          }
        }
      ]
    });
  });

  $('#trigger-1').on('click', function () {
    $('body').modal({'title': 'Add Context', 'content': $('#modal-2')});
  });

  $('#button-2, #trigger-2').on('click', function () {
    $('body').contextualactionpanel({
      title: 'Expenses: $50,000.00',
      content: $('#panel-2'),
      trigger: 'immediate',
      buttons: [
        {
          text: 'Close',
          cssClass: 'btn',
          icon: '#icon-close',
          click: function() {
            var api = $(this).data('modal');
            api.close();
          }
        }
      ]
    });
  });
</script>
