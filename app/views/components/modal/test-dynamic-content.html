<div class="page-container scrollable" id="maincontent" role="main" >

   <div class="row">
      <div class="twelve columns">
         <h3>Modal w/ Dynamic Content</h3>
         <p>
            This test demostrates modifying the modal contents on the fly. Change the top dropdown and more
            form fields will be added. The tabbing and the modal height should work fine after adding more fields.
         </p><br/><br/>

         <button class="btn-secondary" type="button" id="add-context">Open Modal</button><br/><br/>

         <div id="modal-add-context" style="display: none;">
            <div class="field if-value-2">
               <label for="full-name">Full name</label>
               <input id="full-name" name="context-name" class="full-name" type="text"/>
            </div>

            <div class="field">
               <label for="context-type">Type</label>
               <select class="dropdown-lg" id="context-type" name="context-type">
                  <option value="">Change Me</option>
                  <option value="2">This Value Shows More Content</option>
               </select>
            </div>

            <div class="field">
               <label for="context-name">Name</label>
               <input id="context-name" name="context-name" class="input-lg" type="text"/>
            </div>

            <div class="field">
               <label for="context-phone">Phone</label>
               <input id="context-phone" name="context-phone" class="input-lg" type="text"/>
            </div>

            <div class="field if-value-2">
               <label for="context-desc">Description</label>
               <textarea id="context-desc" name="context-desc" class="textarea-lg"></textarea>
            </div>

            <div class="field if-value-2">
               <label for="alt-desc">Alternate Description</label>
               <textarea id="alt-desc" name="alt-desc" class="textarea-lg"></textarea>
            </div>

            <div class="field if-value-2">
               <label for="field-6">Field 6</label>
               <textarea id="field-6" name="field-6" class="textarea-lg"></textarea>
            </div>

            <div class="field if-value-2">
               <label for="field-7">Field 7</label>
               <textarea id="field-7" name="field-7" class="textarea-lg"></textarea>
            </div>

         </div>

      </div>
   </div>


   <script>
      function update() {
         var val = $('#context-type').val();

         if (val === '2') {
            $('.if-value-2').show();
         } else {
            $('.if-value-2').hide();
         }
      }

      var modals = {
            'add-context': {
               'title': 'Change Type & See Modal Height',
               'content': $('#modal-add-context')
            }
         },

         setModal = function (opt) {
            opt = $.extend({
               buttons: [{
                  text: 'Cancel',
                  click: function(e, modal) {
                     modal.close();
                  }
               }, {
                  text: 'Save',
                  click: function(e, modal) {
                     modal.close();
                  },
                  validate: false,
                  isDefault: true
               }]
            }, opt);

            $('body').modal(opt);
         };

      $('#add-context').on('click', function () {
         setModal(modals[this.id]);
      });

      // Initial update of view
      update();

      $('#context-type').on('change', function() {update()});
   </script>
</div>
</div>
